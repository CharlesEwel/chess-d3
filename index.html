<head>
  <script src="http://d3js.org/d3.v4.min.js"></script>
  <script src="http://dimplejs.org/dist/dimple.v2.3.0.min.js"></script>
  <link href="css/styles.css" rel="stylesheet" type="text/css">
</head>
<body>
<h1>Charlie's Chess Page</h1>
<p>Welcome to my chess page. I recently started playing chess semi-competitvely, and am interested in examining openings from an analytical perspective. In chess, there are different ways to open the game that can determine what strategic direction the rest of the game will take. Players spend a lot of time studying the opening and trying to build a repertoire of opening moves that will give them an advantage going into the mid-game. More has been written about the opening then any other phase of the game, and lots of highly theoretical work has gone into trying to find the 'best' opening.</p>
<p>One challenge for many players at the amateur level is that the top tier openings require a large amount of study, in order to keep up with the latest theory. It is not uncommon, at the grandmaster level, for games in the most studied openings to see 20-30 moves played effectively from a script before the 'over the board' thinking commences. For people who are not professional players and cannot devote massive amounts of time to chess, it is desirable to try and examine more obscure openings in the hope of bypassing much of that study, and, as an added bonus, potentially catching one's opponent in an unfamiliar position.</p>
<p>However, there is a trade-off. The common wisdom is that the obscure openings are infrequently played for a reason, that reason being they are not very strong. As such, one has to weigh the benefit of picking an opening less frequently played against the negative of playing less theoretically sound moves. This project began as an attempt to do exactly that, to try and quantify and visualize this tradeoff of quality for quantity, and identify the most 'underplayed' openings in chess</p>
<h2>First Attempts</h2>
<p>One thing I've noticed in my own chess career, mostly over the internet, is that this practice of trying to bypass theory was so common that many allegedly obscure opening systems were in fact more commonly played then the main lines. At the time, I was trying to play the hyper-accelerated dragon variation of the Sicilian Defense as black when my opponent played e4 as their first move. This opening is played when white attempts to enter the open sicilian, and other systems are required when white plays various anti-sicilian sidelines. The book I had purchased to study focused mainly on the open sicilian, and assured me that this would be the most common attack I'd face. It spent relatively less time on what it termed 'side-lines', which were what my opponents typically ended up playing. This book was written by grandmasters, and their assessment of the frequency with which I'd face each of these openings was probably true at the grandmaster level. But at the club level I felt unprepared for what I was actually playing</p>
<p>Anyway, the point being that for this project I wanted to get data on how popular various opening are at lower rating levels than were typically examined in mainstream chess publications. I found data for that at chesstempo.com and began transcribing that into a spreadsheet that I could use for my data visualization. Sadly, their database does not support any 'Export to CSV' functionality, so I had to do a decent amount of data entry by hand. For my first attempt I decided to consider someone who was building a repertoire for playing as the white pieces and wanted to open with 1 e4, which in chess is known as a king's pawn opening. I decided to look at the first three moves, and to only include openings for which a minimum of 100 games had been played at the elo range I was looking at. That sample size was picked because I wanted the winning percentages to be relatively uninfluenced by game-to-game variation, and the other contraints were chosen to keep the manual data entry minimal and keep the scope of the first attempt relatively small</p>
<div id="first-table">
</div>
<p>This above represents my first attempt at making a table in d3. Obviously it isn't very pretty, but it does put the necessary info on the page. A chess game can have 3 possible outcomes, either white wins, black wins, or there is a draw. Since this particular project is looking at things from the perspective of a player with the white pieces, The win column refers to what percentage of the time white wins, whereas loss is what percentage black wins. In order to quantify how strong an opening is, I subtracted black's winning percentage from white's, and placed this in the difference column. A large positive number there represents an opening that is good for white, whereas a negative one represents one that is good for black. 'Games played' refers to how many games there were in the database with this move ordering. I quantified how popular an opening was by looking at games played as a percentage of the total amount of games used in this dataset (roughly thirteen thousand). The most popular opening was the Open Sicilian with 2 d6, while the least was the Caro-Kann, Two Knights Variation. Later, I would try to spruce this table up but for now I wanted to move onto making a chart</p>
<div id="first-chart">
</div>
<p>This is my first chart, using dimplejs to make a scatter. Going in, I didn't know dimple automatically included mouseover functionality. I liked that and wanted to improve upon it in future iterations. Looking at this first chart, we can seek out the most underplayed openings by looking in the bottom right corner. Similarly, we can try to get an idea of what the most undervalued openings are for black by looking in the bottom left. I also notice that dimple has automatically assigned colors to different data points. Right now that appears to be random and it doesn't add anything to the chart. I'd like to make use of color in some way to differentiate different classes of openings.</p>
<p>Doing some naive analysis on our chart, it looks like the best opening for white is the Philidor, and the best opening for black is the Modern Defense with 3 Nf3. So question answered, right? Unfortunately (or fortunately, depending on how you look at it) it's not so simple. Certainly white seems to be doing well if black plays into the Philidor, but that requires some cooperation on Black's part that will not always be there. The Philidor position is reached after 1 e4 e5 2 Nf3 d6 3 d4. If black elects to play Nc6 instead of d6 on move 2, or even enters the Sicilian defense by playing c5 instead of e5 on move 1, then white simply cannot get the advantageous Philidor position, no matter who much they might wish to do so. White therefore needs to be prepare other openings for other moves by black</p>
<p>In fact, the issue of the other player getting a choice in their moves has even deeper implications with our 'naive' analysis from the previous paragraph. I had writted that the 'Modern Defense with Nf3' seems like the best defense for black. The issue with that, however, is that the 'with Nf3' portion refers to a choice of moves that white gets to make. If white instead elects to play Nc3 on his 3rd move, then suddenly white is looking at a +9 difference instead of a -15 one, which is quite a swing in winning chances (remember a positive difference is bad for black in this schema). Now, the data shows that Nf3 is played roughly as often as Nc3, so apparently many players at this level are not aware of what the best way to play against the Modern as white is. Perhaps some players might elect to play the Modern as black and just hope that their opponent goes into an inferior position. Myself, I like to look at what the best possible moves for my opponent are and then plan around that instead of praying they play suboptimally.</p>
<div id="second-table">
</div>
<p>This is my second table. It is prettier and sortable. I've also added another column which is the type of opening it is. This type is determined by the first move played by black. I also redid my chart, having the color correspond to the type of defense and adding a legend. We set up our axes such that a positive difference corresponds to an opening that is strong for white, and a negative one is an opening that is strong for black. We might naively assume that an opening with a difference of zero is considered 'neutral' and roughly balanced for both sides. This is somewhat contradicted though by the fact that we can observe more data to the right of the y-axis then to the left. This is explained y the fact that in chess the white pieces have a small advantage because they move first, and so the mean win percentage difference is about +5 for white. As such, we'd prefer to seek out board states to the right of this mean as white, and try to force board states to the left as black. To illustrate this, I added a red line to the chart corresponding to the mean win difference, so that we can see a 'cut-off' for what would be considered an acceptable opening for each color. Finally, I put the popularity axis on a log scale because there were many openings that were played a fairly small amount of times, and a small number of openings that were played a large amount</p>
<div id="second-chart">
</div>
<p>So what conclusions can we draw from this chart? Interestingly, I created this with the intention of it informing the repertoire choices of the white player, but I think it actually is more useful for black. Looking at it, I see that the open games (any opening where black responds to e4 with e5) tend to fare poorly for black. As someone who used to play e4, I can testify that I spent a comparatively large amount of time preparing for the open games, and tended to fare best in it (I also played the Scotch, which this chart reccomends strongly as having good value for white). The French defense appears to be quite good for black, unless white plays the Tarrasch variation, which they do roughly 25% of the time. The Sicilian is a mixed bag, with opening like the hyper accelerated dragon faring quite well for black, if white decides to play into it. But if white plays certain anti-sicilians such as the grand prix attack then white fares quite well. Again this comports with my anecdotal experience of playing both the hyper accelerated dragon as black and the grand prix as white.</p>
<p>Reading it as someone familiar with chess and able to make sense of the move orders, what stands out to me as a very strong and underplayed defense for black is the Scandinavian defense, modern variation. It's rated as having a winning difference of +1 for white, which means white would expect to win with it 1% more than black would. Keeping in mind that the average winning difference is 5%, and we can see that this gives good winning chanes for black. Further, every opening to the left of it gives white options to opt into a different line which is stronger for white. For the French defenses   (red), there is the Tarrasch variation which gives a winning difference of +12. For the Caro-Kann, white can opt for the exchange or advance variations and get a stronger game, and for the modern defense the Nc3 lines give white a +9 winning chance. Finally, whites first few moves are essentially forced in this variation, which means there is less for us to study. Prompted by this project, I started googling this opening, and found a <a href="https://www.youtube.com/watch?v=m2QMY_J4nzM">video</a> by an authour of a book on it, where he argues strongly for playing this at the amateur level and explains nicely many of the opening issues I attempted to articulate in the intro.</p>
<p>Having realized this, I'm left wondering how well my chart communicates this. It gives me a starting point to begin looking for strong/rarely played openings, but I still need to be familiar with the move orders to figure out what openings can get reliably obtained and what cannot. A great example of this can be seen in contrasting the Scandinavian openings with the modern ones (annoyingly, one of the scandinavian openings is referred to as the 'modern variation'. This doesn't mean it's similar to the modern defense, except in so far as it became popular around the same time). Reading, my previous paragraph, where I talk about white being able to force the game into a different opening, one might wonder 'well couldn't white opt for the Mieses-Kroc opening instead, similar to how white can opt for Nc3 instead of Nf3 in the Modern?" The answer is no, however and that can be seen by looking at the move orders for each opening</p>
<ul>
  <li><b>Modern Defense (3 Nf3):</b> 1 e4 g6 2 d4 Bg7 3 <i>Nf3</i> d6</li>
  <li><b>Modern Defense (3 Nc3):</b> 1 e4 g6 2 d4 Bg7 3 <i>Nc3</i> d6</li>
  <li><b>Scandinavian Defense, Mieses-Kroc Variation:</b> 1 e4 d5 2 exd5 <i>Qxd5</i> 3 Nc3</li>
  <li><b>Scandinavian Defense, Modern Variation:</b> 1 e4 d5 2 exd5 <i>Nf6</i> 3 d4</li>
</ul>
<p>Looking at this, we can see that with the modern defenses, the opening diverge on white's third move, whereas for the scandinavian defenses, they diverge on black's second move. As such the choice of which opening to go for is black's in the second case, and white's in the first. In general, one thing we'd like to do in our repertoire building is minimize the number of viable choices our opponent has, as each choice necessitates a different response and thus more study time. Better still would be to steer our opening into areas where our side has lots of choices, so as to maximize the amount of study time our opponent would have to put in. The task now becomes to come up with a chart that illustrates this.</p>
</body>
<script src="js/scripts.js"></script>
